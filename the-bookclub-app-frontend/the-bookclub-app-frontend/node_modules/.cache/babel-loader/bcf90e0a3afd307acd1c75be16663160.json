{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/winndie/github/the-bookclub/src/components/Book/Book.js\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport $ from 'jquery';\nimport './Book.css';\nconst element = new Map();\nelement.set(0, {\n  button: {\n    label: 'Request',\n    className: 'btn btn-primary request'\n  },\n  storage: {\n    key: 'cart.request'\n  },\n  description: {\n    className: 'book-description'\n  }\n});\nelement.set(1, {\n  button: {\n    label: 'Donate',\n    className: 'btn btn-primary donate'\n  },\n  storage: {\n    key: 'cart.donate'\n  },\n  description: {\n    className: 'book-description'\n  }\n});\nelement.set(2, {\n  button: {\n    label: null,\n    className: 'hide'\n  },\n  storage: {\n    key: 'cart.request'\n  },\n  description: {\n    className: 'hide'\n  }\n});\nelement.set(3, {\n  button: {\n    label: null,\n    className: 'hide'\n  },\n  storage: {\n    key: 'cart.donate'\n  },\n  description: {\n    className: 'hide'\n  }\n});\n\nfunction Book({\n  mode,\n  isbn,\n  stocks,\n  setStocks\n}) {\n  // let bookData = sessionStorage.getItem('book.' + isbn)\n  // if (bookData === null)\n  //   $.ajax({\n  //     url: 'https://yrtt-readers.github.io/the-bookclub/assets/data/books.json',\n  //     async: false,\n  //     success: data => {\n  //       try {\n  //         sessionStorage\n  //           .setItem('book.' + isbn,\n  //             JSON.stringify(data.filter(book => book.isbn === isbn)[0]))\n  //         bookData = sessionStorage.getItem('book.' + isbn)\n  //       } catch (e) { console.log(e) }\n  //     }\n  //   })\n  // bookData = JSON.parse(bookData)\n  const bookData = () => {\n    console.log(sessionStorage.getItem('book.' + isbn));\n\n    if (sessionStorage.getItem('book.' + isbn) == null) {\n      $.ajax({\n        url: 'https://yrtt-readers.github.io/the-bookclub/assets/data/books.json',\n        async: false,\n        success: data => {\n          try {\n            sessionStorage.setItem('book.' + isbn, JSON.stringify(data.filter(book => book.isbn === isbn)[0]));\n          } catch (e) {\n            console.log(e);\n          }\n        }\n      });\n    }\n\n    return JSON.parse(sessionStorage.getItem('book.' + isbn));\n  };\n\n  function onClickListener(e) {\n    let item = {};\n    let cart = [];\n\n    if (e.target.className === 'btn btn-primary request') {\n      item = stocks.reduce((sum, stock) => sum + stock.qty, 0) == 0 ? null : {\n        isbn: isbn,\n        qty: -1\n      };\n    } else if (e.target.className === 'btn btn-primary donate') {\n      item = {\n        isbn: isbn,\n        qty: +1\n      };\n    }\n\n    item === null ? null : setStocks(stock => [...stock, item]);\n    sessionStorage.getItem(element.get(mode).storage.key) === null ? sessionStorage.setItem(element.get(mode).storage.key, JSON.stringify(cart)) : null;\n    cart = JSON.parse(sessionStorage.getItem(element.get(mode).storage.key));\n    item === null ? null : cart.push(item);\n    sessionStorage.setItem(element.get(mode).storage.key, JSON.stringify(cart));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-lg-4 col-sm-6 book\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"img-thumbnail\",\n      src: bookData.thumbnail,\n      alt: \"book-image-not-found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"book-description\",\n      children: /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: bookData.book_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"book-description\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Author names\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), ' ']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: element.get(mode).description.className,\n      children: bookData.description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"book-description\",\n      children: [\"Book Quantity: \", stocks.reduce((sum, stock) => sum + stock.qty, 0)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"book-description\",\n      children: \"Post Code\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"book-description\",\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"#\",\n        children: \"More info\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClickListener,\n      className: element.get(mode).button.className,\n      children: element.get(mode).button.label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Book;\nBook.propTypes = {\n  mode: PropTypes.number,\n  isbn: PropTypes.number,\n  stocks: PropTypes.array,\n  setStocks: PropTypes.func\n};\nexport default Book;\n\nvar _c;\n\n$RefreshReg$(_c, \"Book\");","map":{"version":3,"sources":["/Users/winndie/github/the-bookclub/src/components/Book/Book.js"],"names":["PropTypes","React","$","element","Map","set","button","label","className","storage","key","description","Book","mode","isbn","stocks","setStocks","bookData","console","log","sessionStorage","getItem","ajax","url","async","success","data","setItem","JSON","stringify","filter","book","e","parse","onClickListener","item","cart","target","reduce","sum","stock","qty","get","push","thumbnail","book_name","propTypes","number","array","func"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport $ from 'jquery';\nimport './Book.css';\n\nconst element = new Map()\nelement.set(0,\n  {\n    button: {\n      label: 'Request',\n      className: 'btn btn-primary request'\n    },\n    storage: {\n      key: 'cart.request'\n    },\n    description: {\n      className: 'book-description'\n    }\n  }\n)\nelement.set(1,\n  {\n    button: {\n      label: 'Donate',\n      className: 'btn btn-primary donate'\n    },\n    storage: {\n      key: 'cart.donate'\n    },\n    description: {\n      className: 'book-description'\n    }\n  }\n)\nelement.set(2,\n  {\n    button: {\n      label: null,\n      className: 'hide'\n    },\n    storage: {\n      key: 'cart.request'\n    },\n    description: {\n      className: 'hide'\n    }\n  }\n)\nelement.set(3,\n  {\n    button: {\n      label: null,\n      className: 'hide'\n    },\n    storage: {\n      key: 'cart.donate'\n    },\n    description: {\n      className: 'hide'\n    }\n  }\n)\nfunction Book({ mode, isbn, stocks, setStocks }) {\n\n  // let bookData = sessionStorage.getItem('book.' + isbn)\n\n  // if (bookData === null)\n  //   $.ajax({\n  //     url: 'https://yrtt-readers.github.io/the-bookclub/assets/data/books.json',\n  //     async: false,\n  //     success: data => {\n  //       try {\n  //         sessionStorage\n  //           .setItem('book.' + isbn,\n  //             JSON.stringify(data.filter(book => book.isbn === isbn)[0]))\n\n  //         bookData = sessionStorage.getItem('book.' + isbn)\n  //       } catch (e) { console.log(e) }\n  //     }\n  //   })\n\n  // bookData = JSON.parse(bookData)\n\n  const bookData = () => {\n\n    console.log(sessionStorage.getItem('book.' + isbn))\n    if (sessionStorage.getItem('book.' + isbn) == null) {\n      $.ajax({\n        url: 'https://yrtt-readers.github.io/the-bookclub/assets/data/books.json',\n        async: false,\n        success: data => {\n          try {\n            sessionStorage\n              .setItem('book.' + isbn,\n                JSON.stringify(data.filter(book => book.isbn === isbn)[0]))\n          } catch (e) { console.log(e) }\n        }\n      })\n    }\n    return JSON.parse(sessionStorage.getItem('book.' + isbn))\n  }\n\n  function onClickListener(e) {\n\n    let item = {}\n    let cart = []\n\n    if (e.target.className === 'btn btn-primary request') {\n      item =\n        stocks.reduce((sum, stock) => sum + stock.qty, 0) == 0 ?\n          null : { isbn: isbn, qty: -1 }\n    }\n    else if (e.target.className === 'btn btn-primary donate') {\n      item = { isbn: isbn, qty: +1 }\n    }\n\n    item === null ? null :\n      setStocks(stock => [...stock, item])\n\n    sessionStorage.getItem(element.get(mode).storage.key) === null ?\n      sessionStorage.setItem(element.get(mode).storage.key, JSON.stringify(cart)) : null\n\n    cart = JSON.parse(sessionStorage.getItem(element.get(mode).storage.key))\n\n    item === null ? null :\n      cart.push(item)\n\n    sessionStorage.setItem(element.get(mode).storage.key,\n      JSON.stringify(cart))\n\n  }\n\n  return (\n    <div className='col-lg-4 col-sm-6 book'>\n      <img\n        className='img-thumbnail'\n        src={bookData.thumbnail}\n        alt='book-image-not-found'\n      />\n      <p className='book-description'>\n        <strong>{bookData.book_name}</strong>\n      </p>\n      <p className='book-description'>\n        <strong>Author names</strong>{' '}\n      </p>\n      <p className={element.get(mode).description.className}>{bookData.description}</p>\n      <p className='book-description'>Book Quantity: {stocks.reduce((sum, stock) => sum + stock.qty, 0)}\n      </p>\n      <p className='book-description'>Post Code</p>\n      <p className='book-description'>\n        <a href='#'>More info</a>\n      </p>\n      <button onClick={onClickListener}\n        className={element.get(mode).button.className}>\n        {element.get(mode).button.label}\n      </button>\n    </div>\n  )\n\n}\n\nBook.propTypes = {\n  mode: PropTypes.number,\n  isbn: PropTypes.number,\n  stocks: PropTypes.array,\n  setStocks: PropTypes.func,\n};\n\nexport default Book;\n"]},"metadata":{},"sourceType":"module"}