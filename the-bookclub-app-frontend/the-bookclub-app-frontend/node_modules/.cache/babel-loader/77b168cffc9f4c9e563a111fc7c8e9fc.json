{"ast":null,"code":"import _toConsumableArray from\"/Users/winndie/github/the-bookclub/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/winndie/github/the-bookclub/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from'react';import{useHistory}from\"react-router-dom\";import $ from'jquery';import Button from'react-bootstrap/Button';import Dropdown from'react-bootstrap/Dropdown';import'./BookList.css';import Book from'../Book/Book';var element=new Map();element.set(0,{key:'stocks',header:{label:'Books available to request',className:'text-center'},operation:{label:null,className:'row g-3 align-items-center'}});element.set(1,{key:'stocks',header:{label:'Books available to donate',className:'text-center'},operation:{label:null,className:'row g-3 align-items-center'}});element.set(2,{key:'cart.request',header:{label:'You\\'ve requested the following books',className:'text-center'},operation:{label:null,className:'hide'}});element.set(3,{key:'cart.donate',header:{label:'You\\'ve donated the following books',className:'text-center'},operation:{label:null,className:'hide'}});function BookList(_ref){var mode=_ref.mode;var history=useHistory();var getInitialState=function getInitialState(){if(sessionStorage.getItem(element.get(mode).key)!=null)return JSON.parse(sessionStorage.getItem(element.get(mode).key));if(mode<2){$.ajax({url:'https://yrtt-readers.github.io/the-bookclub/assets/data/stocks.json',async:false,dataType:'json',success:function success(data){try{sessionStorage.setItem(element.get(mode).key,JSON.stringify(data));}catch(e){console.log(e);}}});return JSON.parse(sessionStorage.getItem(element.get(mode).key));}};var _useState=useState(getInitialState),_useState2=_slicedToArray(_useState,2),stocks=_useState2[0],setStocks=_useState2[1];var initList=[];if(stocks==null)element.get(mode).header.className='hide';else initList=_toConsumableArray(new Set(stocks.map(function(v){return v.isbn;})));function onClickListener(e){if(e.target.className==='btn btn-primary checkout')history.push('/checkout');}return/*#__PURE__*/_jsxs(\"section\",{className:\"container container-margin\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row g-3\",children:/*#__PURE__*/_jsx(\"h1\",{className:element.get(mode).header.className,children:element.get(mode).header.label})}),/*#__PURE__*/_jsxs(\"div\",{className:element.get(mode).operation.className,children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary checkout\",onClick:onClickListener,children:\"Checkout\"}),/*#__PURE__*/_jsxs(Dropdown,{className:\"col-auto\",children:[/*#__PURE__*/_jsx(Dropdown.Toggle,{variant:\"primary\",id:\"dropdown-basic-button\",children:\" Sort by\"}),/*#__PURE__*/_jsxs(Dropdown.Menu,{children:[/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#/action-1\",children:\"Title\"}),/*#__PURE__*/_jsx(Dropdown.Item,{href:\"#/action-2\",children:\"Author\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"inputSearch\",className:\"col-form-label\",children:\"Search book\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"input\",{type:\"input\",id:\"inputSearch\",className:\"form-control\",\"aria-describedby\":\"searchHelpInline\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"Search\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row booklist\",children:initList.map(function(v){return/*#__PURE__*/_jsx(Book,{mode:mode,isbn:v,stocks:stocks.filter(function(stock){return stock.isbn===v;}),setStocks:setStocks},v);})})]});}export default BookList;","map":{"version":3,"sources":["/Users/winndie/github/the-bookclub/src/components/BookList/BookList.js"],"names":["React","useState","useHistory","$","Button","Dropdown","Book","element","Map","set","key","header","label","className","operation","BookList","mode","history","getInitialState","sessionStorage","getItem","get","JSON","parse","ajax","url","async","dataType","success","data","setItem","stringify","e","console","log","stocks","setStocks","initList","Set","map","v","isbn","onClickListener","target","push","filter","stock"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport $ from 'jquery';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport './BookList.css';\nimport Book from '../Book/Book';\n\nconst element = new Map()\n\nelement.set(0,\n  {\n    key: 'stocks',\n    header: {\n      label: 'Books available to request',\n      className: 'text-center'\n    },\n    operation: {\n      label: null,\n      className: 'row g-3 align-items-center'\n    }\n  }\n)\nelement.set(1,\n  {\n    key: 'stocks',\n    header: {\n      label: 'Books available to donate',\n      className: 'text-center'\n    },\n    operation: {\n      label: null,\n      className: 'row g-3 align-items-center'\n    }\n  }\n)\nelement.set(2,\n  {\n    key: 'cart.request',\n    header: {\n      label: 'You\\'ve requested the following books',\n      className: 'text-center'\n    },\n    operation: {\n      label: null,\n      className: 'hide'\n    }\n  }\n)\nelement.set(3,\n  {\n    key: 'cart.donate',\n    header: {\n      label: 'You\\'ve donated the following books',\n      className: 'text-center'\n    },\n    operation: {\n      label: null,\n      className: 'hide'\n    }\n  }\n)\n\nfunction BookList({ mode }) {\n\n  const history = useHistory()\n  \n  const getInitialState = () => {\n\n    if (sessionStorage.getItem(element.get(mode).key) != null)\n      return JSON.parse(sessionStorage.getItem(element.get(mode).key))\n    if (mode < 2) {\n      $.ajax({\n        url: 'https://yrtt-readers.github.io/the-bookclub/assets/data/stocks.json',\n        async: false,\n        dataType: 'json',\n        success: data => {\n          try {\n            sessionStorage.setItem(element.get(mode).key, JSON.stringify(data))\n          } catch (e) { console.log(e) }\n        }\n      })\n      return JSON.parse(sessionStorage.getItem(element.get(mode).key))\n    }\n  }\n\n  const [stocks, setStocks] = useState(getInitialState)\n  let initList = []\n\n  if (stocks == null)\n    element.get(mode).header.className = 'hide'\n  else\n    initList = [... new Set(stocks.map(v => { return v.isbn }))]\n\n  function onClickListener(e) {\n    if (e.target.className === 'btn btn-primary checkout')\n      history.push('/checkout');\n  }\n\n  return (\n\n    <section className='container container-margin'>\n      <div className='row g-3'>\n        <h1 className={element.get(mode).header.className}>{element.get(mode).header.label}</h1>\n      </div>\n      <div className={element.get(mode).operation.className}>\n        <button className='btn btn-primary checkout' onClick={onClickListener}>Checkout</button>\n        <Dropdown className='col-auto'>\n          <Dropdown.Toggle variant='primary' id='dropdown-basic-button'> Sort by</Dropdown.Toggle>\n          <Dropdown.Menu>\n            <Dropdown.Item href='#/action-1'>Title</Dropdown.Item>\n            <Dropdown.Item href='#/action-2'>Author</Dropdown.Item>\n          </Dropdown.Menu>\n        </Dropdown>\n        <div className='col-auto'>\n          <label htmlFor='inputSearch' className='col-form-label'>Search book</label>\n        </div>\n        <div className='col-auto'>\n          <input\n            type='input'\n            id='inputSearch'\n            className='form-control'\n            aria-describedby='searchHelpInline'\n          />\n        </div>\n\n        <div className='col-auto'>\n          <Button variant='primary'>Search</Button>\n        </div>\n      </div>\n      <div className='row booklist'>\n        {initList.map(v =>\n          <Book key={v} mode={mode}\n            isbn={v}\n            stocks={stocks.filter(stock => stock.isbn === v)}\n            setStocks={setStocks} />)}\n      </div>\n    </section >\n  );\n}\n\nexport default BookList;\n\nBookList.propTypes = {\n  mode: PropTypes.number\n}"]},"metadata":{},"sourceType":"module"}